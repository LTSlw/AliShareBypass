# AliShareBypass

绕过阿里云盘分享格式限制。不得不吐槽阿里云盘限制分享格式实在太恶心了，甚至不支持压缩包，webm作为一个视频文件我记得我也不能分享出去，真就那么想看看我分享了什么？

## 用法

```
AliShareBypass <command> <path> [<path>...]

<Commands>
e : 对文件编码，混淆绕过阿里云盘格式检查
d : 解码文件，恢复处理过的文件
```

支持通配符，文件，和文件夹

**注意：请确保没有错误的输入不应被转换的文件（尤其在解码模式中，你会丢失数据）**

## 特性

+ 将不可分享的文件转化为可以分享的格式
+ 混入随机数据，每次运行都将得到哈希不同的文件

## 原理

### 阿里云盘如何检查文件类型？

阿里云盘通过检查文件头来判断文件类型，其实它甚至不会检查文件后缀名（这个程序还是加上了更改后缀名的功能，算是对更改过的文件有一个肉眼可见的标记）

### 绕过办法

首先肯定要伪造一个正常的文件头，从分享白名单里随便挑一个格式，把它的文件头拿过来用

简单的拼接文件会大量消耗时间，因此为了保证运行速度，直接修改文件开头的字节，而把这些字节补充在尾部。还原的时候只需把尾部的字节还原到头部，再将尾部切除。因此，经过这个程序处理后文件大小会有几字节的变化

### 随机数据

给文件头后面追加几字节的随机数据，成为一个新的文件头，这样每次生成的文件便不同了

## 编译


```
C++17以上版本
```
